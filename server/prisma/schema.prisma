datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id                            String       @id @default(auto()) @map("_id") @db.ObjectId
  username                      String       @unique
  email                         String       @unique
  profilePictureUrl             String?
  password                      String
  name                          String?
  contactNumber                 String?
  dateOfBirth                   String?
  bloodGroup                    String?
  address                       String?
  organizationName              String?
  organizationAddress           String?
  organizationContactEmail      String?
  organizationContactNumber     String?
  organizationLocationLongitude  String?
  organizationLocationLatitude  String?
  workingScheduleStart          String?
  workingScheduleEnd            String?
  emailVerified                 Boolean?     @default(false)
  emailVerificationCode         String?
  passwordResetVerificationCode String?
  createdAt                     DateTime     @default(now())
  updatedAt                     DateTime     @updatedAt
  attendances                   Attendance[] @relation("UserAttendances")
}

model Attendance {
  id        String           @id @default(auto()) @map("_id") @db.ObjectId
  user      User             @relation(fields: [userId], references: [id], name: "UserAttendances")
  userId    String           @db.ObjectId
  date      DateTime         @default(now())
  status    AttendanceStatus
  createdAt DateTime         @default(now())
  updatedAt DateTime         @updatedAt
}

enum AttendanceStatus {
  PRESENT
  ABSENT
  LATE
  ON_LEAVE
}
